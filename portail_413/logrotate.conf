# Configuration logrotate pour DCOP (413)
# Ã€ placer dans /etc/logrotate.d/dcop-413

/home/taipan_51/portail_413/portail_413/logs/nginx/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    copytruncate
    postrotate
        docker exec dcop_nginx nginx -s reload > /dev/null 2>&1 || true
    endscript
}

/home/taipan_51/portail_413/portail_413/logs/app/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    copytruncate
    postrotate
        docker exec dcop_app kill -USR1 1 > /dev/null 2>&1 || true
    endscript
}

# Logs PostgreSQL
/home/taipan_51/portail_413/portail_413/logs/postgres/*.log {
    weekly
    missingok
    rotate 8
    compress
    delaycompress
    notifempty
    copytruncate
}
